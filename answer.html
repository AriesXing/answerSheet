<!DOCTYPE html>
<html>
	<head>
	    <meta charset="utf-8">
	    <title>Document</title>
	    <script src="./jquery-1.9.1.js"></script>
	</head>
	<style>
		body{background-color:#f9f9f9}
		*{padding:0;margin:0;box-sizing:border-box;}
		.fl{float: left}
		.fr{float:right;}
		/*.clearfix{clear:both;}*/
		.clearfix::after{
			content:'';
			display: block;
			clear:both;
		}
		.anchorPoint{position:relative;width:55px;}
		.anchorPoint div{width:35px;height:16px;background-color: #000;position: relative;}
		.tiaomaPoint {left:0;top:36px;}
		.objPoint{left:0;top:136px;}
		.answerSheetTitle{width:732px;height:52px;font-size: 26px;font-weight: 600;text-align: center;}
		.objectTitle{width:732px;height:65px;font-size: 18px;text-align: left;line-height: 80px;}
		.title{width:100%;height:50px;background-color: #3b8eff}
		button{outline: none;border:0 none;cursor: pointer;}
		.answerSheet{width:1620px;margin:20px auto;overflow-x:scroll; }
		.answerCon {width:2480px;height:1755px;background-color: #ccc;padding:55px 55px;position: relative;}
		.paperCon{height: 1535px;}
		.stuCont{width:732px;min-height: 100px;position: relative;border:1px solid #000}
		.infoBox{box-sizing:content-box;position: absolute;}
		.template{width:260px;border-left:1px solid #ccc;background-color: #fff;height:100%;}
		.studentInfo {width:auto;}
		.stuInfoChoice{position:absolute;width:480px;height:240px;border:1px solid #ccc;padding:20px;left:50%;margin-left:-240px;top:100px;display: none;background-color: #fff;z-index:111;}
		.stuInfoChoice button{width: 60px;bottom: 20px;position: absolute;right: 20px;height: 30px;line-height: 30px;border-radius: 10px;z-index:111;}
		.optionSet input{width:20px;} 
		.optionSet .addBtn{position: relative;bottom: 0;right:0;width:auto;}
		.stuInfoChoice .defineBtn{right:100px;}
		.previewbox{height:auto;height:auto;border:1px solid #ccc;margin-top:20px;padding:20px;clear: both}
		.contentOption{position:relative;width:50%;height:40px;float: left;border:1px solid red;box-sizing:border-box;}
		.optBtn{position: absolute;top: 10px;right:10px;}
		.objective{position:absolute;width:640px;height:640px;border:1px solid #ccc;padding:20px;left:50%;margin-left:-320px;top:100px;display: none;background-color: #fff;z-index:9999;}
		.objective input{width:20px;}
		.objTitle input{width:160px;}
		.objChoiceCon{height:450px;border:1px solid #ccc;margin-top:20px;padding:20px;overflow: scroll}
		/*.paperCon{width:800px;height: auto;border:1px solzid #000;position: relative;}*/
		.choiceoption{display: inline-block;border:1px solid #000;padding:0 5px;margin-right:10px;font-size: 12px;height:15px;line-height: 13px}
		.subNum {display: inline-block;width: 40px;padding-right: 20px;text-align: right;}
		.objCon {width:732px;border:1px solid black;padding:40px 35px;display: flex;flex-wrap :wrap;}
		.choiceBox{width:190px;margin-bottom:31px;flex-grow:1;}
		.subTitle{width:758px;height:52px;text-align: center;font-size: 18px;line-height: 52px;}
		.subCon{width:758px;height:1535px;border:1px solid black;overflow: hidden;}
		.bigTopicNum,.smallTopicNum{width:50px;height:100%;border-right:1px solid black;font-size: 12px;text-align: center;}
		.editSize{display: none;position: absolute;right:0;bottom: 0;}
		.editSizeBox{display: none;width:400px;height:300px;border:1px solid #ccc;position: absolute;left:50%;margin-left:-200px;top:100px;background-color: #fff;z-index:9999;}
		.editSizeBox input{width:30px;}
		.cheatSignBox{display: none;}
		.signTitle{font-size: 16px;color:red;margin:10px 0 5px 10px;}
		.litleTitle{margin-left:10px;font-size: 14px;}
		#cheatSign p{line-height: 1}
		#cheatSign span {display: inline-block;font-size: 12px;border: 1px solid red;height:15px;line-height: 13px;padding:0 5px;color:red;margin-left:20px;}
		.signInfo {margin-left:25px;color:red;font-size: 15px;}
		.zdExplain, .confirmation{display: none;width:100%; height:80px;}
		.eidtzdExplain, .eidtconfirmation{display: none;width:100%; height:80px;}
		.bg{width: 100%;height:100%;background-color: rgba(0,0,0,0.4);display: none;position: absolute;left: 0;top: 0}
		.tips{width:100%;height:75px;padding:15px;border-bottom: 1px solid}
		.pageNum {top:1565px;}
		.topright{left:2335px;top:-75px;}
		.pageNum_r{top:1535px;left:2335px;}
		.pageNumber{width:100%;text-align: center;margin-top:40px;}
	</style>
	<body>
		<div class="title clearfix"> 	
			<button class="fr">保存</button>
		</div>
		<div class="content clearfix">
			<div class="fl answerSheet">
				
				<div class="answerCon clearfix">
					<!-- 定位点 -->
					<div class="anchorPoint fl clearfix">
						<div class="titlePoint"></div>
						<div class="tiaomaPoint"></div>
						<div class="tiaomaendPoint"></div>
						<div class="objPoint"></div>
						<div class="pageNum"></div>
						<div class="topright"></div>
						<div class="pageNum_r"></div>
					</div> 
					<div class="clearfix fl">
						<div class="answerSheetTitle">兰州大学网络与继续教育学苑考试答题卷</div>
						<div class="paperCon">
							
							<div class="stuCont">
							
							</div>
							<div class="objectTitle">
							客观题答题区(选择题、判断题填图区)
							</div>
							<div class="objCon clearfix"></div>
							
						</div>
						<div class="pageNumber">1</div>
					</div>
					
					<div class="clearfix fl">
						<div class="subTitle">主观题答题区</div>
						<div class="subCon clearfix">
							<div class="tips">以下是主观题答题区域，必须使用黑色字迹签字笔书写，并按试卷标注题号书写所答题的大题号、小题号。请在规定区域大题，超出大题区域书写的答案无效</div>
							<div class="bigTopicNum fl">大题号</div>
							<div class="smallTopicNum fl">小题号</div>
							<div class="bigTopicCon fl"></div>
							
						</div>
						<div class="pageNumber">2</div>
					</div>
					<div class="clearfix fl">
						<div class="subTitle">主观题答题区</div>
						<div class="subCon">
							<div class="bigTopicNum fl">大题号</div>
							<div class="smallTopicNum fl">小题号</div>
							<div class="bigTopicCon fl"></div>
						</div>
						<div class="pageNumber">3</div>
					</div>
					
				</div>
			</div>
			<div class="fr template">			
				<div class="paperSize">
					<input type="radio" id="A3"><label for="A3">A3</label>			
					<input type="radio" id="A4"><label for="A4">A4</label>			
				</div>
				<div class="studentInfo clearfix">
					<button class="addStuInfo">添加学生信息</button>

				</div> 
				<div class="paperInfo">
					<button class="addObjective">添加客观题</button>
					<button class="addSubjective">添加主观题</button>
				</div>
			</div>
		</div>
		<div class="stuInfoChoice">
			<div >
				<select name="" id="">
					<option  class="option" id="tiaoma">条码</option>
					<option  class="option" id="baoxuhao">包序号</option>
					<option  class="option" id="hanshouzhan">函授站</option>
					<option  class="option" id="cengci">层次</option>
					<option  class="option" id="zhuanye">专业</option>
					<option  class="option" id="kaochang">考场</option>
					<option  class="option" id="changci">场次</option>
					<option  class="option" id="zuoweihao">座位号</option>
					<option  class="option" id="kecheng">课程名称</option>
					<option  class="option" id="kaoshipici">考试批次</option>
					<option  class="option" id="ruxuepici">入学批次</option>
					<option  class="option" id="xuehao">学号</option>
					<option  class="option" id="xingming">姓名</option>
					<option  class="option" id="kaoshixuzhi">作答说明</option>
					<option  class="option" id="cheatSign">作弊标记</option>
					<option  class="option" id="commit">信息确认暨承诺书</option>
				</select>

				<div >
					<textarea class="zdExplain"  pleaseholder="请输入详细内容"></textarea> 
					<textarea class="confirmation"  pleaseholder="请输入详细内容"></textarea> 
			
				</div>

				<div class="optionSet">宽度 <input class="_wid" type="text"> 高度<input class="_hei" type="text"> <button class="addBtn">+</button></div> 
				<div class="cheatSignBox">
					
						<p class="signTitle">此栏考生禁填</p>
						<p class="litleTitle">考务标记由监考老师填涂</p>
						<p class="signInfo" style="margin-top:25px;margin-bottom:10px;">缺考标记 <span id="miss">Q</span></p>
						<p class="signInfo">违纪标记 <span id="weiji">W</span></p>
					
					
				</div>
				
				<p>预览</p>
				<div class="previewbox clearfix">
					
				</div>
			</div>
			<div>
				<button class="defineBtn fr">确定</button>
				<button class="cancleBtn fr">取消</button>
				
			</div>
		</div>
		<div class="objective">
			<div>添加选择题</div>
			<div class="setObj">
				<div class="objTitle">题目<input type="text" value="一.选择题"></div>
				<div class="objType">
					<button>单选题</button>
					<!-- <button>多选题</button> -->
					
				</div>
				<div class="objInfo">
					<p>题号:<input type="text" class="subjectOrder"> 共<input type="text" class="subjectNum">题 每题<input type="text" class="subjectScore">分 每题<input type="text" class="subjectChoiceNum">选项 <button class="addBtn">+</button></p>
				</div> 
				
				<div class="objChoiceCon clearfix">
					<!-- <p><span >1</span> [A] [B] [C] [D]</p>
					<p><span >2</span> [A] [B] [C] [D]</p>
					<p><span >3</span> [A] [B] [C] [D]</p>
					<p><span >4</span> [A] [B] [C] [D]</p>					 	
					<p><span >5</span> [A] [B] [C] [D]</p>			 -->		 	
				</div>
		
			
			
			</div>
			<div>
				<button class="defineBtn fr">确定</button>
				<button class="cancleBtn fr">取消</button>
				
			</div>
		</div>
		<div class="editSizeBox">
			<div>设置</div>
			<div class="">
				<div class="">
					<p>设置区域大小：共<input type="text" class="_width">行 <input type="text" class="_height">列	</p>
					<p>设置所在位置：距左边<input type="text" class="_left">列 距上边 <input type="text" class="_top">行 </p>
				</div> 
				<div >
					<textarea class="eidtzdExplain"  pleaseholder="请输入详细内容"></textarea> 
					<textarea class="eidtconfirmation"  pleaseholder="请输入详细内容"></textarea> 
			
				</div>

			</div>
			<div>
				<button class="defineBtn fr">确定</button>
				<button class="cancleBtn fr">取消</button>
				
			</div>
			
		</div>
		<div class="bg"></div>
		<script>
			var singleLocation = ["1=150,105,235,472;20,15,114,472;20,15,144,472;20,15,174,472;21,15,204,472;19,15,235,472;"]
			var stuInfoLocation = [{cName:"tiaoma",X:221,Y:89,Width:365,Height:90},{cName:"baoxuhao",X:0,Y:45,Width:180,Height:45}]
				
			$(function(){

				var options = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N"];
				var z = 0
				var totalHeight = 0 ;//计算学生信息部分总高度
				var maxTop = 0;
				
				var maxEle;
				var baseW = $(".titlePoint")[0].offsetWidth
				var baseH = $(".titlePoint")[0].offsetHeight
				var baseX = 55;
				var baseY = 55;
				var baseBeginX = 55 + parseInt(baseW/2)
				var baseBeginY = 55 + parseInt(baseH/2)
				// if(singleLocation.length>0){
				// 	var choicesLocation = singleLocation.join(";")
					
				// 	var singleNum = singleLocation.length;
				// 	choicesLocation = choicesLocation.slice(2,choicesLocation.length-1)
				// 	console.log(choicesLocation)
				// 	choicesLocation = choicesLocation.split(";")
				// 	for(var i=0;i<choicesLocation.length;i++){
				// 		choicesLocation[i] =  choicesLocation[i].split(",")
				// 	}
				// 	console.log(choicesLocation)
				// 	var subjectChoiceHtml = ""
				// 	for(var i=0;i<choicesLocation.length-1;i++){
				// 		subjectChoiceHtml += "<span class='choiceoption'>"+options[i]+"</span>"
				// 	}
				// 	var html = "<div class='fl choiceBox'>"
				// 	for(var t=0;t<singleNum;t++){
				// 		if((t+1)%5==0){
				// 			html += "<p><span class='subNum' >"+(t+1)+"</span>"+subjectChoiceHtml+"</p></div><div class='fl choiceBox' >"
				// 		}else{
				// 			html += "<p><span  class='subNum'>"+(t+1)+"</span>"+subjectChoiceHtml+"</p>"
				// 		}
				// 	}
				// 	$(".objCon").html(html)
				// 	// if(subjectNum && subjectNum>0){
				// 	// 	// html+="<div class='fl choiceBox'>"
				// 	// 	for(var i=0;i<subjectNum;i++){
				// 	// 		if((i+1)%5==0){
				// 	// 			html += "<p><span class='subNum' >"+(i+1)+"</span>"+subjectChoiceHtml+"</p></div><div class='fl choiceBox' >"
				// 	// 		}else{
				// 	// 			html += "<p><span  class='subNum'>"+(i+1)+"</span>"+subjectChoiceHtml+"</p>"
				// 	// 		}
							
				// 	// 	}
				// 	// 	$(".objChoiceCon").html(html)
				// 	// }
				// }
				// if(stuInfoLocation.length>0){
				// 	var html = ""
				// 	// $.each(stuInfoLocation,function(i,e){

				// 	// })
				// 	var topArr = []
				// 	var maxEle = stuInfoLocation[0].Height
				// 	for(var i=0;i<stuInfoLocation.length;i++){
				// 		if(stuInfoLocation[i].cName=="tiaoma"){
				// 			html+="<div class='infoBox "+stuInfoLocation[i].cName+"' id='"+stuInfoLocation[i].cName+"'  style='border:1px solid red;width:"+stuInfoLocation[i].Width+"px;height:"+stuInfoLocation[i].Height+"px;left:"+stuInfoLocation[i].X+"px;top:"+stuInfoLocation[i].Y+"px'><button class='editSize fl'>编辑</button></div></div>"
				// 		}else{
				// 			html+="<div class='infoBox   "+stuInfoLocation[i].cName+"' id="+stuInfoLocation[i].cName+"   style='border:1px solid red;width:"+stuInfoLocation[i].Width+"px;height:"+stuInfoLocation[i].Height+"px;left:"+stuInfoLocation[i].X+"px;top:"+stuInfoLocation[i].Y+"px'><div style='height:100%;width:90px;text-align:center;border-right:1px solid red;' class='fl infoName'>"+ stuInfoLocation[i].cName+"</div><button class='editSize fl'>编辑</button></div>"
				// 		}
						
				// 		topArr.push(stuInfoLocation[i].Y)
				// 		if(stuInfoLocation[i].Height>maxEle){
				// 			maxEle = stuInfoLocation[i].Height
				// 		}
				// 	}
				// 	var maxTop = Math.max.apply(null,topArr)
				// 	$(".stuCont").append(html)
				// 	$(".stuCont").height(maxTop+maxEle)

				// 	// if(tmX>0 && tmY>0){
				// 	// 	var html = ""
				// 	// 	html+="<div class='infoBox  tiaoma' id='tiaoma'  style='border:1px solid red'><button class='editSize fl'>编辑</button></div></div>"
				// 	// 
						
				// 	// }
				// }
				
				$(".addStuInfo").click(function(){
					$(".bg").show()
					$(".stuInfoChoice").show()
					$(".stuInfoChoice select").change(function(){
						console.log(1);
						console.log($(".option:selected"))
							
						if($(".option:selected").attr("id")=="kaoshixuzhi"){
							$(".zdExplain").show()
							$(".confirmation").hide();
						}else if($(".option:selected").attr("id")=="commit"){
							$(".zdExplain").hide()
							$(".confirmation").show();
						}else{
							$(".zdExplain").hide()
							$(".confirmation").hide();
						}
					})
					$(".cancleBtn").click(function(e){
						$(".bg").hide()
						$(".stuInfoChoice").hide()
						$(".previewbox").html("")
					})
					$(".addBtn").unbind().bind("click",function(){						
						$(".previewbox").html("")
						var html="";
						var _className = $("option:selected")[0].id
						var _wid = $("._wid").val();
						var _hei = $("._hei").val();
						if(_className == "tiaoma"){
							html+="<div class='infoBox  "+_className+"' id="+_className+"  style='border:1px solid red'><button class='editSize fl'>编辑</button></div></div>"
						}else if(_className == "cheatSign"){
							html+="<div class='infoBox  "+_className+"' id="+_className+"  style='border:1px solid red'>"+$(".cheatSignBox").html()+"<button class='editSize fl'>编辑</button></div></div>"
						}else if(_className == "commit"){
							var val = $(".confirmation").val()
							html+="<div class='infoBox  "+_className+"' id="+_className+"  style='border:1px solid red'><p style='color:red'>考生信息确认暨考试承诺书</p><p class='valDetail'>"+val+"</p><button class='editSize fl'>编辑</button></div></div>"
						}else if(_className == "kaoshixuzhi"){
							var val = $(".zdExplain").val()
							html+="<div class='infoBox  "+_className+"' id="+_className+"  style='border:1px solid red'><p style='color:red'>作答说明</p><p class='valDetail'>"+val+"</p><button class='editSize fl'>编辑</button></div></div>"
						}else{
							html+="<div class='infoBox   "+_className+"' id="+_className+"  style='border:1px solid red'><div style='height:100%;width:90px;text-align:center;border-right:1px solid red;' class='fl infoName'>"+ $(".option:selected").html()+"</div><button class='editSize fl'>编辑</button></div>"
						}
						
						$(".previewbox").append(html);
						$("."+_className+"").width(_wid*25+"%")
						$("."+_className+"").height(45*_hei+"px")
						$("."+_className+" .infoName").css("line-height",$("."+_className+"").height()+"px")
					})
					$(".defineBtn").unbind().bind("click",function(){ 
						var _className = $("option:selected")[0].id
						z++;
						$(".stuCont").append($(".previewbox").html())
						$(".stuCont ."+_className+"").css({"position":"absolute","z-index":z})
						// if(_className=="kaoshixuzhi"){
						// 	$(".stuCont ."+_className+"").append("<input style='height:100%' type='text' placeholder='点击填写内容'>")
						// }
						if (_className=="tiaoma") {
		 					var start =parseInt($(".tiaomaPoint").css("top"))
		 					$(".tiaomaendPoint").css("top",start + $(".stuCont ."+_className+"").height()-32)
		 				};

						$(".previewbox").html("")
						if($(".stuCont ."+_className+"").height()>$(".stuCont").height()){
							$(".stuCont").height($(".stuCont ."+_className+"").height())
						}
						$(".stuInfoChoice").hide()
						$(".bg").hide()
					})
				 
				 	//拖动方式
				    // $(document).on('mousedown', '.infoBox', function (e) {
			     //        e = e || window.event; //兼容ie浏览器
			     //        var drag = $(this);
			     //        $('body').addClass('select'); //webkit内核和火狐禁止文字被选中
			     //        document.body.onselectstart = document.body.ondrag = function () { //ie浏览器禁止文字选中
			     //            return false;
			     //        }
			     //        // if ($(e.target).attr("id") == "coor" || $(e.target).hasClass("closeBtn") ) { //点关闭按钮不能拖拽模态框
			     //        //     return false;
			     //        // }
			     //        var _height = 0;
			     //        var preBox = drag.prevAll();
			     //        if(preBox.length>0){
			     //        	$.each(preBox,function(i,e){
			     //        		_height += $(e).height();
			     //        	})
			     //        }
			     //        var diffX = e.clientX - drag.offset().left; 

			     //        //鼠标点击物体那一刻相对于物体左侧边框的距离=点击时的位置相对于浏览器最左边的距离-物体左边框相对于浏览器最左边的距离
			     //        // var diffY = e.clientY - drag.offset().top;
			     //        var diffY = e.clientY
			     //        $(document).on('mousemove', function (e) {

			     //            e = e || window.event; //兼容ie浏览器 
			     //            var left = e.clientX - diffX;
			     //            var top = e.clientY - diffY ;
			     //            // var top = e.clientY 
			     //            if (left < 0) {
			     //                left = 0;
			     //            } 
			     //            if (left > $(".stuCont").innerWidth() - drag.width()) {
			     //                left = $(".stuCont").innerWidth - drag.width();
			     //            }
			     //            if (top < 0) {
			     //                top = 0;
			     //            }  
			     //            if (top > $(".stuCont").innerHeight() - drag.height()) {
			     //                top = $(".stuCont").innerHeight - drag.height() + 50;
			     //            }
			     //            //移动时重新得到物体的距离，解决拖动时出现晃动的现象
			     //            drag.css({
			     //                'left': left + 'px',
			     //                'top': top + 'px'
			     //            });
			             	
			     //        });
			     //        getLocation(drag)
			     //        $(document).on('mouseup', function (e) { //当鼠标弹起来的时候不再移动 
			     //            $(document).unbind("mousemove");
			     //            $(document).unbind("mouseup");
			     //            drag.css("cursor", "default")
			     //        });
			     //    });
					$(".cancleBtn").click(function(){
						$(".stuInfoChoice input").val("");
						$(".previewbox").html("")
						$(".stuInfoChoice").hide()
						$(".bg").hide()

					})
				})
					$(document).unbind().on('mouseenter', '.infoBox', function (e){
				 		// e.stopPropagation();
				 		var $currentTarget = $(e.target)
				 		$(e.target).find(".editSize").show();
				 		var oWidth = $(e.target).width();
				 		var oHeigth = $(e.target).height();
				 		var oLeft = $(e.target).css("left");
				 		var oTop = $(e.target).css("top");
				 		$(e.target).find(".editSize").click(function(){
				 			$(".bg").show()
				 			$(".editSizeBox").show()
				 			if($(e.target).attr("id")=="kaoshixuzhi"){
				 				$(".eidtzdExplain").val($("#kaoshixuzhi .valDetail").html()).show()
				 				$(".eidtconfirmation").hide()
				 			}
				 			if($(e.target).attr("id")=="commit"){
				 				$(".eidtconfirmation").val($("#commit .valDetail").html()).show()
				 				$(".eidtzdExplain").hide()
				 			}
				 			$(".editSizeBox input").unbind().bind("change",function(){
				 				var val = $(this).val();
				 				var _className = $(this).attr("class")
				 				if(_className == "_width"){
				 					 $currentTarget.width(val*25+"%")
										
				 				}else if(_className == "_height"){
									 $currentTarget.height(45*val+"px") 	
				 				}else if(_className == "_left"){
				 					 $currentTarget.css("left",val*25+"%")
				 				}else if(_className == "_top"){
				 					 $currentTarget.css("top",45*val+"px")
				 				}

				 			})
				 			$(".editSizeBox .defineBtn").unbind().bind("click",function(){
				 				var _width = $("._width").val()
				 				var _height = $("._height").val()
				 				var _left = $("._left").val()
				 				var _top = $("._top").val()
				 				
				 				if(_width || _width===0){
				 					$currentTarget.width(_width*25+"%")									
				 				}
				 				if(_height || _height===0){
				 					$currentTarget.height(_height*45+"px")									
				 				}
				 				if(_left || _left===0){
				 					 $currentTarget.css("left",_left*25+"%")								
				 				}
				 				if(_top || _top ===0){
				 					 $currentTarget.css("top",_top*45+"px")

				 				}
				 				if($(e.target).attr("id")=="kaoshixuzhi"){
					 				$("#kaoshixuzhi .valDetail").html($(".eidtzdExplain").val())
					 			}
					 			if($(e.target).attr("id")=="commit"){
					 				$("#commit .valDetail").html($(".eidtconfirmation").val())
					 			
					 			}
					 			if(_top>maxTop){
					 				maxTop = _top;
					 				maxEle = $currentTarget
					 			}else{
					 				var tmpTop = [];
					 				var maxHei = $currentTarget.height();
					 				$.each($(".infoBox"),function(i,e){
					 					if($(e).height()>maxHei){
					 						maxEle = $(e)
					 					}else{
					 						maxEle = $currentTarget
					 					}
				 						tmpTop.push(parseInt($(e).css("top")))
				 					})
				 					
				 					maxTop=Math.max.apply(null,tmpTop)/45
				 					
					 				// if(_top<maxTop){
					 				// 	$.each($(".infoBox"),function(i,e){
					 				// 		tmpTop.push(parseInt($(e).css("top")))
					 				// 	})
					 				// 	maxTop=Math.max.apply(null,tmpTop)/45
					 				// }else{
					 				// 	maxTop=_top
					 				// }
					 				// maxEle = $currentTarget
					 			}
					 			
					 			totalHeight = maxEle.height()+maxTop*45
					 			

				 				$currentTarget.find(".infoName").css("line-height",$currentTarget.height()+"px")
				 				getLocation($(e.target))
				 				if($currentTarget.attr("id")=="tiaoma") {
				 					$(".tiaomaPoint").css("top",parseInt($currentTarget.css("top"))+36)
				 					var start = parseInt($(".tiaomaPoint").css("top"))
				 					var currentTop = parseInt($currentTarget.css("top"))
				 					$(".tiaomaendPoint").css("top",start+$currentTarget.height()-32)
				 				};

				 				// if(parseInt(oLeft)==0 && parseInt($currentTarget.css("left"))!=0){
				 				// 	totalHeight -= $currentTarget.height()
				 				// 	if(totalHeight<100){
				 				// 		totalHeight =100;
				 				// 		$(".stuCont").height(totalHeight)
				 				// 		$(".objPoint").css("top",totalHeight+36+"px")
				 				// 	}
				 					
			 				// }
			 					// totalHeight = $currentTarget.height()+parseInt($currentTarget.css("top"))
			 					
			 					// if($currentTarget[0].offsetTop>maxTop){
			 					// 	maxTop = $currentTarget[0].offsetTop+ $currentTarget.height()

			 						
			 					// }else{
			 					// 	$.each($(".infoBox"),function(i,e){
			 					// 		if(parseInt($(e).css("top"))>$){
			 					// 			maxTop = $(e).height()+$(e).offsetTop()
			 					// 		}
			 					// 	})
			 						
			 					// }
			 					// totalHeight = maxTop
			 					console.log(totalHeight)
			 					$(".stuCont").height(totalHeight)
			 					$(".objPoint").css("top",totalHeight+36+"px")
				 				$(".editSizeBox input").val()
			 					$(".editSizeBox").hide()
			 					$(".bg").hide()

				 			})
				 			$(".editSizeBox .cancleBtn").unbind().bind("click",function(){
				 				z = 0;
				 			 	$(e.target).width(oWidth);
						 		$(e.target).height(oHeigth);
						  		$(e.target).css("left",oLeft);
						 		$(e.target).css("top",oTop);
						 		$(".editSizeBox input").val()
						 		$(".editSizeBox").hide()
						 		$(".bg").hide()
				 			})
				 		})
				 	}) 
				 	$(document).on('mouseleave', '.infoBox', function (e){
				 		$(e.target).find(".editSize").hide();
				 	}) 
				$(".addObjective").click(function(){
					$(".objective").css("display","block")
					$(".bg").show()
					$(".addBtn").click(function(){
						//选项个数
						var subjectChoiceHtml = ""
						var subjectChoiceNum = $(".subjectChoiceNum").val();
						if(subjectChoiceNum>0){
							for(var i=0;i<subjectChoiceNum;i++){
								subjectChoiceHtml += "<span class='choiceoption'>"+options[i]+"</span>"
							}
							// subjectChoiceHtml = options.slice(0,subjectChoiceNum).join(" ") 
							// console.log(options)
							// console.log(subjectChoiceHtml)
						}
						//题数
						var  subjectNum = Number($(".subjectNum").val())
						
						var pl = $(".paperCon").find("p").length;
						// var html=$(".paperCon").html()
						var html = "<div class='fl choiceBox'>"
						if(subjectNum && subjectNum>0){
							// html+="<div class='fl choiceBox'>"
							for(var i=0;i<subjectNum;i++){
								if((i+1)%5==0){
									html += "<p><span class='subNum' >"+(i+1)+"</span>"+subjectChoiceHtml+"</p></div><div class='fl choiceBox' >"
								}else{
									html += "<p><span  class='subNum'>"+(i+1)+"</span>"+subjectChoiceHtml+"</p>"
								}
								
							}
							$(".objChoiceCon").html(html)
						}
						
					})
					$(".defineBtn").unbind().bind("click",function(e){
						e.stopPropagation()
						$(".objCon").html($(".objChoiceCon").html())
						$(".objective").css("display","none")
						$(".bg").hide()
						$(".objChoiceCon").html("")
						$(".objective input").val("")
						var choices = 	$(".objCon .choiceBox p")
						var locationArr = []
						$.each(choices,function(i,e){
							
							var tihao = $(e).children()
							var boxW = 150;
							var boxH = 105;
							var boxX = $(e).parent(".choiceBox")[0].offsetLeft;
							var boxY = $(e).parent(".choiceBox")[0].offsetTop;							
							var w; 
							var h; 
							var x; 
							var y; 
							var subNum;
							var str = "";
							$.each($(e).children(),function(t,item){
								console.log($(item))
								if($(item).hasClass("subNum")){
									subNum = $(item).html();
								}else{
									w = $(item)[0].offsetWidth
									h = $(item)[0].offsetHeight
									x = parseInt($(item)[0].offsetLeft-baseBeginX)
									y = parseInt($(item)[0].offsetTop-baseBeginY)
									str += ""+w+","+h+","+x+","+y+";"
								}
								if((t+1)%5==1){
									boxX = parseInt($(e).children()[t].offsetLeft-baseBeginX)
									boxY = parseInt($(e).children()[t].offsetTop-baseBeginY)
								}
								
								
								
								// w,h,x-baseX,y-baseY
							})
							str = ""+subNum+"="+boxW+","+boxH+","+boxX+","+boxY+";" + str 
							
							locationArr.push(str)
							console.log(locationArr)
							// var w = e.offsetWidth
							// var h = e.offsetHeigh
							// var x = e.offseLeft
							// var y = e.offsetHeigh
							
						})
						// $(".choiceBox").unbind().bind("mousedown",function(e){

						// })
					})

					$(".cancleBtn").click(function(){
						$(".objChoiceCon").html("")
						$(".objective input").val("")
						$(".objective").hide();
						$(".bg").hide()
					})

				})
	 		
				//获取坐标
				function getLocation(drag){
					
					var stuW = $(".stuCont")[0].offsetWidth
					var stuH = $(".stuCont")[0].offsetHeigh
					var stuL = $(".stuCont")[0].offsetLeft
					var stuT = $(".stuCont")[0].offsetTop
					var _left = drag[0].offsetLeft + stuL -baseBeginX;
					var _top = drag[0].offsetTop + stuT - baseBeginY
					var _width =drag.width();
					var _height = drag.height();
					console.log(_width,_height,_top,_left)
					if(drag.attr("id")=="cheatSign"){
						//缺考
						var mWidth = $("#miss")[0].offsetWidth
						var mHeigth = $("#miss")[0].offsetHeigh
						var mLeft = $("#miss")[0].offsetLeft
						var mTop = $("#miss")[0].offsetTop
						mLeft = mLeft + _left + stuL - baseBeginX
						mTop = mTop + _top + stuT - baseBeginY
						//违纪
						var wWidth = $("#weiji")[0].offsetWidth
						var wHeigth = $("#weiji")[0].offsetHeigh
						var wLeft = $("#weiji")[0].offsetLeft
						var wTop = $("#weiji")[0].offsetTop
						mLeft = wLeft + _left + stuL - baseBeginX
						mTop = wTop + _top + stuT - baseBeginY
						
						// console.log(mLeft,mTop)
					}
				}
				//获取客观题坐标
				
			})
		</script>
	</body>
</html>